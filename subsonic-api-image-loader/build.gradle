apply plugin: 'com.android.library'
apply plugin: 'kotlin-android'
//apply plugin: 'jacoco'
apply from: '../gradle_scripts/code_quality.gradle'

android {
    compileSdkVersion(versions.compileSdk)

    defaultConfig {
        minSdkVersion(versions.minSdk)
        targetSdkVersion(versions.targetSdk)

        testInstrumentationRunner "android.support.test.runner.AndroidJUnitRunner"
    }

    sourceSets {
        main.java.srcDirs += 'src/main/kotlin'
        test.java.srcDirs += 'src/test/kotlin'
        test.java.srcDirs += "${projectDir}/src/integrationTest/kotlin"
        test.resources.srcDirs += "${projectDir}/src/integrationTest/resources"
    }
}

dependencies {
    api project(':domain')
    api project(':subsonic-api')
    api other.kotlinStdlib
    api other.picasso

    testImplementation testing.junit
    testImplementation testing.kotlinJunit
    testImplementation testing.mockito
    testImplementation testing.mockitoInline
    testImplementation testing.mockitoKotlin
    testImplementation testing.kluent
    testImplementation testing.robolectric
}

jacoco {
    toolVersion(versions.jacoco)
}

//ext {
//    jacocoExclude = []
//}

//jacocoTestReport {
//    reports {
//        html.enabled true
//        csv.enabled false
//        xml.enabled true
//    }
//
//    afterEvaluate {
//        classDirectories = files(classDirectories.files.collect {
//            fileTree(dir: it, excludes: jacocoExclude)
//        })
//    }
//}
//
//test.finalizedBy jacocoTestReport
//test {
//    jacoco {
//        excludes += jacocoExclude
//    }
//}
